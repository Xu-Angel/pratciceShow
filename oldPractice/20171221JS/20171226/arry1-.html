<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div>
    <input type="button" value="全选" />
    <input type="button" value="反选" />
</div>
<div>
    <div><input type="checkbox" value="1" />1</div>
    <div><input type="checkbox" value="2" />2</div>
    <div><input type="checkbox" value="3" />3</div>
    <div><input type="checkbox" value="4" />4</div>
    <div><input type="checkbox" value="5" />5</div>
    <div><input type="checkbox" value="6" />6</div>
</div>
</body>
<script>
    // 1. 获取按钮
    // getElementsByTagName根据标签名称获取所有的标签
    var inputs = document.getElementsByTagName('input');
    // console.log(inputs);
    // 2. 分别给按钮绑定好点击事件
    var firstBtn = inputs[0];
    var secondBtn = inputs[1];
    var selectedAll = false;	// 记录是否为全选的状态，如果是true就是全选

    firstBtn.onclick = function(){
        // 改变原有的状态
        selectedAll = !selectedAll;
        // 实现全选
//			inputs[2].checked = 'checked';
//			inputs[3].checked = 'checked';
//			inputs[4].checked = 'checked';
        for (var i=2;i<inputs.length;i++){
            if (selectedAll){
                inputs[i].checked = 'checked';
            }else{
                inputs[i].checked = false;
            }
        }
        firstBtn.value = selectedAll ? '取消所有' : '全选';
    };
    secondBtn.onclick = function(){
        selectedAll = false;		// 取消全选的状态
        firstBtn.value = '全选';

        for (var i=2;i<inputs.length;i++){
            var temp = inputs[i];	// 获取第i个input标签
            // 修改checkbox的checked状态
            temp.checked = !temp.checked;
        }
    };

    // 3. 给所有的checkbox绑定点击事件，当取消选择时需要修改全选的状态
    for (var i=2;i<inputs.length;i++){
        // 使用闭包解决，状态不改变问题
        (function(j){
            /*var tmp = inputs[j];
            tmp.onclick = function(){
                if (!tmp.checked){// 没有被选中的状态，需要改变全选
                    selectedAll = false;		// 取消全选的状态
                    firstBtn.value = '全选';
                }
            };*/
            inputs[j].onclick = function(){jin'zun'jiao'hui
                // this 谁调用当前函数的就是谁
                //console.log(this);
                if (!this.checked){
                    selectedAll = false;
                    firstBtn.value = '全选';
                }
            };
        })(i);
        // (function(){})()
    }
</script>
</html>
