<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        div{
            width: 520px;
            height: 280px;
            margin: 100px auto;
            position: relative;
            background: greenyellow;
            /*overflow: hidden;*/
        }
        ul.img{
            width:500%;
            position: absolute;
            top: 0;
            left: 0;
        }
        ul.img li{
            list-style: none;
            float: left;
        }
        ul.point{
            position: absolute;
            left: 50%;
            bottom: 10px;
            margin-left: -75px;
        }
        ul.point li{
            list-style: none;
            float: left;
            margin: 0 5px;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            background: lightcoral;
            cursor: pointer;
            border-radius: 50%;
        }
        ul.point li.now{
            background: goldenrod;
        }
        .arrow{
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            margin-top: -25px;
        }
        .arrow li{
            list-style: none;
            width: 35px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            font-size: 30px;
            cursor: pointer;
            background: rgba(0, 0, 0, .2);
        }
        .arrow .left{
            float: left;
        }
        .arrow .right{
            float: right;
        }
    </style>

</head>
<body>
<div>
    <ul class="img">
        <li><img src="img/1.jpg"/></li>
        <li><img src="img/2.jpg"/></li>
        <li><img src="img/3.jpg"/></li>
        <li><img src="img/4.jpg"/></li>
        <li><img src="img/5.jpg"/></li>
    </ul>
    <ul class="point">
        <li class="now">1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
    </ul>
    <ul class="arrow">
        <li class="left">&lt;</li>
        <li class="right">&gt;</li>
    </ul>
</div>
</body>
<script src="js/myQuery.js"></script>
<script>
    // 1. 获取所有圆点的li
    var points = document.getElementsByClassName('point')[0].children;
    // 2. 获取img的ul
    var imgUl = document.getElementsByClassName('img')[0];
    // 3. 获取div
    var div = document.getElementsByTagName('div')[0];
    // 4. 给所有的圆点添加点击事件
    for (var i=0,len=points.length;i<len;i++){
        var pt = points[i];
        pt.i = i;
        pt.onclick = function(){
            div.index = this.i;
            // 显示对应的图片
            animation(imgUl, -div.index * div.offsetWidth);
            highlightPoint();
        };
    }
    // 5. 获取到左右的li
    var arrows = $('.arrow')[0].children;
    // 6. 给左右的li分别添加上点击事件
    // 左侧按钮
    arrows[0].onclick = function(){
        // 修改当前图片为上一张
        div.index--;
        // 判断是否为-1，如果是表示当前是第1张需要切换后到最后1张
        if (div.index < 0){
            div.index = imgUl.children.length - 2;
            imgUl.style.left = -div.index * div.offsetWidth + 'px';
        }
        // 计算移动到的目标坐标
        var target = -div.index * div.offsetWidth;
        // 调用调动函数完成图片的切换
        animation(imgUl, target);
        highlightPoint();
    };
    // 右侧按钮
    arrows[1].onclick = function(){
        // 修改当前图片为下一张
        div.index++;
        // 判断是否最后一张，如果是把imgUl的left设置为0(不通过animation修改)
        if (div.index >= imgUl.children.length){
            div.index = 2;  // 最后一张等同于是第一张，所以下一张是第2张
            // 重置最后一张为第一张
            imgUl.style.left = 0 + 'px';
        }
        var target = -div.index * div.offsetWidth;
        animation(imgUl, target);
        highlightPoint();
    };
    // 7. 设置保存当前是第几张图片
    div.index = 1;

    /**
     * 高亮当前图片对应的圆点
     */
    function highlightPoint(){
        // 清除所有原点的now样式
        for (var j=0;j<points.length;j++){
            points[j].className = '';
        }
        // 给点击的圆点添加中选中的状态
        points[div.index].className = 'now'; // this是指鼠标点击的那一个li
    }

    // 无缝轮播
    // 在原有图片li的数组的最后一张添加一个新的li，li放的是第1张的图片
    imgUl.innerHTML += '<li><img src="img/1.jpg"/></li>';
    // 在原有图片li的数组的第一张添加一个新的li，li放的是最后1张的图片
    imgUl.innerHTML = '<li><img src="img/5.jpg"/></li>' + imgUl.innerHTML;
    // 修改ul的宽度
    //imgUl.style.width = div.offsetWidth * imgUl.children.length + 'px';
    imgUl.style.width = imgUl.children.length * 100 + '%';
    // 设置ul的left点，-的div宽度\
    imgUl.style.left = -div.offsetWidth + 'px';

</script>
</html>