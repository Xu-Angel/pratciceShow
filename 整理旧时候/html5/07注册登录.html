<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册登录</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        form{
            width: 400px;
            height: 300px;
            line-height: 100px;
            text-align: center;
            background: lightyellow;
            margin:20px auto;
        }
        input{
            width: 200px;
            height: 50px;
            line-height: 50px;
            border:1px solid orange;
            border-radius: 10px;
            outline:none;
        }
        input[type=button]{
            width: 100px;
        }
    </style>
</head>
<body>
    <form>
        昵称：<input type="text" id="username">
        <br>
        密码：<input type="password" id="password">
        <br>
        <input type="button" value="登录" id="login">
        <input type="button" value="注册" id="register">
    </form>
</body>
<script>
    //登录按钮
    const loginBtn = document.querySelectorAll("input[type=button]")[0];
    //注册按钮
    const registerBtn = document.querySelectorAll("input[type=button]")[1];
    //用户名输入框
    const userInp = document.querySelector("input[type=text]");
    //密码输入框
    const passwordInp = document.querySelector("input[type=password]");
    //你想存成什么格式：
    //key:register
    //value:[{name:"",password:""},{name:"",password:""}]
    //需要有一个数组，里面存放所有用户的信息，初始值为[]
    let userArray = window.localStorage.getItem("register")||"[]";
    console.log(userArray)

    userArray = JSON.parse(userArray);
    console.log(userArray)
    
    //注册流程
    registerBtn.onclick=()=>{
        let username = userInp.value;
        let password = passwordInp.value;
        let user = {name:username,password:password};
        //重名不允许注册
        for(let i=0;i<userArray.length;i++){
            if(userArray[i].name==username){
                alert("该用户名以被占用");
                return;
            }
        }
        userArray.push(user);
        window.localStorage.setItem("register",JSON.stringify(userArray))
    }
    //登录流程
    loginBtn.onclick=()=>{
        let username = userInp.value;
        let password = passwordInp.value;
        //如果用户名和密码相同则登录成功
        for(let i=0;i<userArray.length;i++){
            if(userArray[i].name==username){
                if(userArray[i].password==password){
                    alert("恭喜你登录成功！")
                }
                return;
            }
        }
    }

</script>
</html>