<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="css/tinyImgUpload.css">
</head>
<body>
  <div id="upload">dsads</div>
  <div class="img-up-add  img-item">
    <div class="img-add-icon">
      <img src="" alt="">
    </div>
  </div>
  <script src="./js/testUpload.js"></script>
  <script>
      let imgArr = []
   var options = {
    path: 'http://test.qidian.keywa.cc/Image/upload',
    onSuccess: function (res, index) {
      imgArr.push(res.result)
      document.querySelectorAll('.img-remove').forEach((val, index, arr) => {
        document.querySelectorAll('.gif')[index].style.display = 'none'
        val.onclick = () => {
            imgArr.splice(index, 1)
          }
        })
    },
    onFailure: function (res) {
      document.querySelectorAll('.gif')[0].style.display = 'none'
        console.log(res)
    }
}
var upload = ImgUpload('#upload', options)
  </script>
</body>
</html>
